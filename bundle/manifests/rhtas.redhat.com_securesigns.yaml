apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.0
  creationTimestamp: null
  name: securesigns.rhtas.redhat.com
spec:
  group: rhtas.redhat.com
  names:
    kind: Securesign
    listKind: SecuresignList
    plural: securesigns
    singular: securesign
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: The Deployment status
      jsonPath: .status.conditions[?(@.type=="Ready")].reason
      name: Status
      type: string
    - description: The rekor url
      jsonPath: .status.rekor.url
      name: Rekor URL
      type: string
    - description: The fulcio url
      jsonPath: .status.fulcio.url
      name: Fulcio URL
      type: string
    - description: The tuf url
      jsonPath: .status.tuf.url
      name: Tuf URL
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Securesign is the Schema for the securesigns API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: SecuresignSpec defines the desired state of Securesign
            properties:
              ctlog:
                description: CTlogSpec defines the desired state of CTlog component
                properties:
                  monitoring:
                    description: Enable Service monitors for ctlog
                    properties:
                      enabled:
                        default: true
                        description: If true, the Operator will create monitoring
                          resources
                        type: boolean
                        x-kubernetes-validations:
                        - message: Feature cannot be disabled
                          rule: (self || !oldSelf)
                    required:
                    - enabled
                    type: object
                  privateKeyPasswordRef:
                    description: Password to decrypt private key
                    properties:
                      key:
                        description: The key of the secret to select from. Must be
                          a valid secret key.
                        pattern: ^[-._a-zA-Z0-9]+$
                        type: string
                      name:
                        description: |-
                          Name of the referent.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                    required:
                    - key
                    - name
                    type: object
                    x-kubernetes-map-type: atomic
                  privateKeyRef:
                    description: The private key used for signing STHs etc.
                    properties:
                      key:
                        description: The key of the secret to select from. Must be
                          a valid secret key.
                        pattern: ^[-._a-zA-Z0-9]+$
                        type: string
                      name:
                        description: |-
                          Name of the referent.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                    required:
                    - key
                    - name
                    type: object
                    x-kubernetes-map-type: atomic
                  publicKeyRef:
                    description: |-
                      The public key matching the private key (if both are present). It is
                      used only by mirror logs for verifying the source log's signatures, but can
                      be specified for regular logs as well for the convenience of test tools.
                    properties:
                      key:
                        description: The key of the secret to select from. Must be
                          a valid secret key.
                        pattern: ^[-._a-zA-Z0-9]+$
                        type: string
                      name:
                        description: |-
                          Name of the referent.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                    required:
                    - key
                    - name
                    type: object
                    x-kubernetes-map-type: atomic
                  rootCertificates:
                    description: |-
                      List of secrets containing root certificates that are acceptable to the log.
                      The certs are served through get-roots endpoint. Optional in mirrors.
                    items:
                      description: SecretKeySelector selects a key of a Secret.
                      properties:
                        key:
                          description: The key of the secret to select from. Must
                            be a valid secret key.
                          pattern: ^[-._a-zA-Z0-9]+$
                          type: string
                        name:
                          description: |-
                            Name of the referent.
                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                          type: string
                      required:
                      - key
                      - name
                      type: object
                      x-kubernetes-map-type: atomic
                    type: array
                  serverConfigRef:
                    description: |-
                      Secret holding Certificate Transparency server config in text proto format
                      If it is set then any setting of treeID, privateKeyRef, privateKeyPasswordRef,
                      publicKeyRef, rootCertificates and trillian will be overridden.
                    properties:
                      name:
                        description: |-
                          Name of the referent.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                    required:
                    - name
                    type: object
                    x-kubernetes-map-type: atomic
                  treeID:
                    description: |-
                      The ID of a Trillian tree that stores the log data.
                      If it is unset, the operator will create new Merkle tree in the Trillian backend
                    format: int64
                    type: integer
                  trillian:
                    default:
                      port: 8091
                    description: Trillian service configuration
                    properties:
                      address:
                        description: Address to Trillian Log Server End point
                        type: string
                      port:
                        default: 8091
                        description: Port of Trillian Log Server End point
                        format: int32
                        maximum: 65535
                        minimum: 1
                        type: integer
                    type: object
                type: object
                x-kubernetes-validations:
                - message: privateKeyRef cannot be empty
                  rule: (!has(self.publicKeyRef) || has(self.privateKeyRef))
                - message: privateKeyRef cannot be empty
                  rule: (!has(self.privateKeyPasswordRef) || has(self.privateKeyRef))
              fulcio:
                description: FulcioSpec defines the desired state of Fulcio
                properties:
                  certificate:
                    description: Certificate configuration
                    properties:
                      caRef:
                        description: Reference to CA certificate
                        properties:
                          key:
                            description: The key of the secret to select from. Must
                              be a valid secret key.
                            pattern: ^[-._a-zA-Z0-9]+$
                            type: string
                          name:
                            description: |-
                              Name of the referent.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        required:
                        - key
                        - name
                        type: object
                        x-kubernetes-map-type: atomic
                      commonName:
                        description: |-
                          CommonName specifies the common name for the Fulcio certificate.
                          If not provided, the common name will default to the host name.
                        type: string
                      organizationEmail:
                        type: string
                      organizationName:
                        type: string
                      privateKeyPasswordRef:
                        description: Reference to password to encrypt CA private key
                        properties:
                          key:
                            description: The key of the secret to select from. Must
                              be a valid secret key.
                            pattern: ^[-._a-zA-Z0-9]+$
                            type: string
                          name:
                            description: |-
                              Name of the referent.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        required:
                        - key
                        - name
                        type: object
                        x-kubernetes-map-type: atomic
                      privateKeyRef:
                        description: Reference to CA private key
                        properties:
                          key:
                            description: The key of the secret to select from. Must
                              be a valid secret key.
                            pattern: ^[-._a-zA-Z0-9]+$
                            type: string
                          name:
                            description: |-
                              Name of the referent.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        required:
                        - key
                        - name
                        type: object
                        x-kubernetes-map-type: atomic
                    type: object
                    x-kubernetes-validations:
                    - message: organizationName cannot be empty
                      rule: (has(self.caRef) || self.organizationName != "")
                    - message: privateKeyRef cannot be empty
                      rule: (!has(self.caRef) || has(self.privateKeyRef))
                  config:
                    description: Fulcio Configuration
                    properties:
                      MetaIssuers:
                        description: |-
                          A meta issuer has a templated URL of the form:
                            https://oidc.eks.*.amazonaws.com/id/*
                          Where * can match a single hostname or URI path parts
                          (in particular, no '.' or '/' are permitted, among
                          other special characters)  Some examples we want to match:
                          * https://oidc.eks.us-west-2.amazonaws.com/id/B02C93B6A2D30341AD01E1B6D48164CB
                          * https://container.googleapis.com/v1/projects/mattmoor-credit/locations/us-west1-b/clusters/tenant-cluster
                        items:
                          properties:
                            ChallengeClaim:
                              description: |-
                                Optional, the challenge claim expected for the issuer
                                Set if using a custom issuer
                              type: string
                            ClientID:
                              type: string
                            Issuer:
                              description: The expected issuer of an OIDC token
                              type: string
                            IssuerClaim:
                              description: Optional, if the issuer is in a different
                                claim in the OIDC token
                              type: string
                            IssuerURL:
                              description: The expected issuer of an OIDC token
                              type: string
                            SPIFFETrustDomain:
                              description: |-
                                SPIFFETrustDomain specifies the trust domain that 'spiffe' issuer types
                                issue ID tokens for. Tokens with a different trust domain will be
                                rejected.
                              type: string
                            SubjectDomain:
                              description: |-
                                The domain that must be present in the subject for 'uri' issuer types
                                Also used to create an email for 'username' issuer types
                              type: string
                            Type:
                              description: |-
                                Used to determine the subject of the certificate and if additional
                                certificate values are needed
                              type: string
                          required:
                          - ClientID
                          - Issuer
                          - Type
                          type: object
                        type: array
                      OIDCIssuers:
                        description: OIDC Configuration
                        items:
                          properties:
                            ChallengeClaim:
                              description: |-
                                Optional, the challenge claim expected for the issuer
                                Set if using a custom issuer
                              type: string
                            ClientID:
                              type: string
                            Issuer:
                              description: The expected issuer of an OIDC token
                              type: string
                            IssuerClaim:
                              description: Optional, if the issuer is in a different
                                claim in the OIDC token
                              type: string
                            IssuerURL:
                              description: The expected issuer of an OIDC token
                              type: string
                            SPIFFETrustDomain:
                              description: |-
                                SPIFFETrustDomain specifies the trust domain that 'spiffe' issuer types
                                issue ID tokens for. Tokens with a different trust domain will be
                                rejected.
                              type: string
                            SubjectDomain:
                              description: |-
                                The domain that must be present in the subject for 'uri' issuer types
                                Also used to create an email for 'username' issuer types
                              type: string
                            Type:
                              description: |-
                                Used to determine the subject of the certificate and if additional
                                certificate values are needed
                              type: string
                          required:
                          - ClientID
                          - Issuer
                          - Type
                          type: object
                        type: array
                    type: object
                    x-kubernetes-validations:
                    - message: At least one of OIDCIssuers or MetaIssuers must be
                        defined
                      rule: (has(self.OIDCIssuers) && (size(self.OIDCIssuers) > 0))
                        || (has(self.MetaIssuers) && (size(self.MetaIssuers) > 0))
                  ctlog:
                    default:
                      port: 80
                      prefix: trusted-artifact-signer
                    description: Ctlog service configuration
                    properties:
                      address:
                        description: Address to Ctlog Log Server End point
                        type: string
                      port:
                        default: 80
                        description: Port of Ctlog Log Server End point
                        format: int32
                        maximum: 65535
                        minimum: 1
                        type: integer
                      prefix:
                        default: trusted-artifact-signer
                        description: |-
                          Prefix is the name of the log. The prefix cannot be empty and can
                          contain "/" path separator characters to define global override handler prefix.
                        pattern: ^[a-z0-9]([-a-z0-9/]*[a-z0-9])?$
                        type: string
                    type: object
                  externalAccess:
                    description: Define whether you want to export service or not
                    properties:
                      enabled:
                        default: false
                        description: |-
                          If set to true, the Operator will create an Ingress or a Route resource.
                          For the plain Ingress there is no TLS configuration provided Route object uses "edge" termination by default.
                        type: boolean
                        x-kubernetes-validations:
                        - message: Feature cannot be disabled
                          rule: (self || !oldSelf)
                      host:
                        description: Set hostname for your Ingress/Route.
                        type: string
                      routeSelectorLabels:
                        additionalProperties:
                          type: string
                        description: Set Route Selector Labels for ingress sharding.
                        type: object
                        x-kubernetes-validations:
                        - message: RouteSelectorLabels can't be modified
                          rule: (oldSelf.size() == 0 || self == oldSelf)
                    required:
                    - enabled
                    type: object
                  monitoring:
                    description: Enable Service monitors for fulcio
                    properties:
                      enabled:
                        default: true
                        description: If true, the Operator will create monitoring
                          resources
                        type: boolean
                        x-kubernetes-validations:
                        - message: Feature cannot be disabled
                          rule: (self || !oldSelf)
                    required:
                    - enabled
                    type: object
                  trustedCA:
                    description: ConfigMap with additional bundle of trusted CA
                    properties:
                      name:
                        description: |-
                          Name of the referent.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                    required:
                    - name
                    type: object
                    x-kubernetes-map-type: atomic
                required:
                - certificate
                - config
                type: object
              rekor:
                description: RekorSpec defines the desired state of Rekor
                properties:
                  backFillRedis:
                    default:
                      enabled: true
                      schedule: 0 0 * * *
                    description: BackFillRedis CronJob Configuration
                    properties:
                      enabled:
                        default: true
                        description: Enable the BackFillRedis CronJob
                        type: boolean
                        x-kubernetes-validations:
                        - message: Feature cannot be disabled
                          rule: (self || !oldSelf)
                      schedule:
                        default: 0 0 * * *
                        description: Schedule for the BackFillRedis CronJob
                        pattern: ^(@(?i)(yearly|annually|monthly|weekly|daily|hourly)|((\*(\/[1-9][0-9]*)?|[0-9,-]+)+\s){4}(\*(\/[1-9][0-9]*)?|[0-9,-]+)+)$
                        type: string
                    required:
                    - enabled
                    type: object
                  externalAccess:
                    description: Define whether you want to export service or not
                    properties:
                      enabled:
                        default: false
                        description: |-
                          If set to true, the Operator will create an Ingress or a Route resource.
                          For the plain Ingress there is no TLS configuration provided Route object uses "edge" termination by default.
                        type: boolean
                        x-kubernetes-validations:
                        - message: Feature cannot be disabled
                          rule: (self || !oldSelf)
                      host:
                        description: Set hostname for your Ingress/Route.
                        type: string
                      routeSelectorLabels:
                        additionalProperties:
                          type: string
                        description: Set Route Selector Labels for ingress sharding.
                        type: object
                        x-kubernetes-validations:
                        - message: RouteSelectorLabels can't be modified
                          rule: (oldSelf.size() == 0 || self == oldSelf)
                    required:
                    - enabled
                    type: object
                  monitoring:
                    description: Enable Service monitors for rekor
                    properties:
                      enabled:
                        default: true
                        description: If true, the Operator will create monitoring
                          resources
                        type: boolean
                        x-kubernetes-validations:
                        - message: Feature cannot be disabled
                          rule: (self || !oldSelf)
                    required:
                    - enabled
                    type: object
                  pvc:
                    default:
                      accessModes:
                      - ReadWriteOnce
                      retain: true
                      size: 5Gi
                    description: PVC configuration
                    properties:
                      accessModes:
                        default:
                        - ReadWriteOnce
                        description: PVC AccessModes
                        items:
                          enum:
                          - ReadWriteOnce
                          - ReadOnlyMany
                          - ReadWriteMany
                          - ReadWriteOncePod
                          type: string
                        minItems: 1
                        type: array
                      name:
                        description: Name of the PVC
                        maxLength: 253
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                      retain:
                        default: true
                        description: Retain policy for the PVC
                        type: boolean
                        x-kubernetes-validations:
                        - message: Field is immutable
                          rule: (self == oldSelf)
                      size:
                        anyOf:
                        - type: integer
                        - type: string
                        default: 5Gi
                        description: |-
                          The requested size of the persistent volume attached to Pod.
                          The format of this field matches that defined by kubernetes/apimachinery.
                          See https://pkg.go.dev/k8s.io/apimachinery/pkg/api/resource#Quantity for more info on the format of this field.
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      storageClass:
                        description: The name of the StorageClass to claim a PersistentVolume
                          from.
                        type: string
                    required:
                    - retain
                    type: object
                  rekorSearchUI:
                    default:
                      enabled: true
                    description: Rekor Search UI
                    properties:
                      enabled:
                        default: true
                        description: If set to true, the Operator will deploy a Rekor
                          Search UI
                        type: boolean
                        x-kubernetes-validations:
                        - message: Feature cannot be disabled
                          rule: (self || !oldSelf)
                      host:
                        description: Set hostname for your Ingress/Route.
                        type: string
                      routeSelectorLabels:
                        additionalProperties:
                          type: string
                        description: Set Route Selector Labels labels for ingress
                          sharding.
                        type: object
                    required:
                    - enabled
                    type: object
                  sharding:
                    default: []
                    description: Inactive shards
                    items:
                      description: RekorLogRange defines the range and details of
                        a log shard
                      properties:
                        encodedPublicKey:
                          description: The public key for the log shard, encoded in
                            Base64 format
                          pattern: ^[A-Za-z0-9+/\n]+={0,2}\n*$
                          type: string
                        treeID:
                          description: ID of Merkle tree in Trillian backend
                          format: int64
                          minimum: 1
                          type: integer
                        treeLength:
                          description: Length of the tree
                          format: int64
                          minimum: 0
                          type: integer
                      required:
                      - treeID
                      type: object
                      x-kubernetes-map-type: atomic
                    type: array
                    x-kubernetes-list-map-keys:
                    - treeID
                    x-kubernetes-list-type: map
                  signer:
                    description: Signer configuration
                    properties:
                      keyRef:
                        description: |-
                          Reference to the signer private key.

                          Optional field. When KMS is set to "secret", this field can be left empty, in which case the operator will automatically generate a signer key.
                        properties:
                          key:
                            description: The key of the secret to select from. Must
                              be a valid secret key.
                            pattern: ^[-._a-zA-Z0-9]+$
                            type: string
                          name:
                            description: |-
                              Name of the referent.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        required:
                        - key
                        - name
                        type: object
                        x-kubernetes-map-type: atomic
                      kms:
                        default: secret
                        description: |-
                          KMS Signer provider. Specifies the key management system (KMS) used for signing operations.

                          Valid values:
                          - "secret" (default): The signer key is stored in a Kubernetes Secret.
                          - "memory": Ephemeral signer key stored in memory. Recommended for development use only.
                          - KMS URI: A URI to a cloud-based KMS, following the Go Cloud Development Kit (Go Cloud) URI format. Supported URIs include:
                            - awskms://keyname
                            - azurekms://keyname
                            - gcpkms://keyname
                            - hashivault://keyname
                        type: string
                      passwordRef:
                        description: |-
                          Password to decrypt the signer private key.

                          Optional field. This should be set only if the private key referenced by `keyRef` is encrypted with a password.
                          If KMS is set to a value other than "secret", this field is ignored.
                        properties:
                          key:
                            description: The key of the secret to select from. Must
                              be a valid secret key.
                            pattern: ^[-._a-zA-Z0-9]+$
                            type: string
                          name:
                            description: |-
                              Name of the referent.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        required:
                        - key
                        - name
                        type: object
                        x-kubernetes-map-type: atomic
                    type: object
                  treeID:
                    description: |-
                      ID of Merkle tree in Trillian backend
                      If it is unset, the operator will create new Merkle tree in the Trillian backend
                    format: int64
                    type: integer
                  trillian:
                    default:
                      port: 8091
                    description: Trillian service configuration
                    properties:
                      address:
                        description: Address to Trillian Log Server End point
                        type: string
                      port:
                        default: 8091
                        description: Port of Trillian Log Server End point
                        format: int32
                        maximum: 65535
                        minimum: 1
                        type: integer
                    type: object
                  trustedCA:
                    description: ConfigMap with additional bundle of trusted CA
                    properties:
                      name:
                        description: |-
                          Name of the referent.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                    required:
                    - name
                    type: object
                    x-kubernetes-map-type: atomic
                type: object
              trillian:
                description: TrillianSpec defines the desired state of Trillian
                properties:
                  database:
                    default:
                      create: true
                      pvc:
                        accessModes:
                        - ReadWriteOnce
                        retain: true
                        size: 5Gi
                    description: Define your database connection
                    properties:
                      create:
                        default: true
                        description: Create Database if a database is not created
                          one must be defined using the DatabaseSecret field
                        type: boolean
                        x-kubernetes-validations:
                        - message: Field is immutable
                          rule: (self == oldSelf)
                      databaseSecretRef:
                        description: |-
                          Secret with values to be used to connect to an existing DB or to be used with the creation of a new DB
                          mysql-host: The host of the MySQL server
                          mysql-port: The port of the MySQL server
                          mysql-user: The user to connect to the MySQL server
                          mysql-password: The password to connect to the MySQL server
                          mysql-database: The database to connect to
                        properties:
                          name:
                            description: |-
                              Name of the referent.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        required:
                        - name
                        type: object
                        x-kubernetes-map-type: atomic
                      pvc:
                        default:
                          retain: true
                          size: 5Gi
                        description: PVC configuration
                        properties:
                          accessModes:
                            default:
                            - ReadWriteOnce
                            description: PVC AccessModes
                            items:
                              enum:
                              - ReadWriteOnce
                              - ReadOnlyMany
                              - ReadWriteMany
                              - ReadWriteOncePod
                              type: string
                            minItems: 1
                            type: array
                          name:
                            description: Name of the PVC
                            maxLength: 253
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          retain:
                            default: true
                            description: Retain policy for the PVC
                            type: boolean
                            x-kubernetes-validations:
                            - message: Field is immutable
                              rule: (self == oldSelf)
                          size:
                            anyOf:
                            - type: integer
                            - type: string
                            default: 5Gi
                            description: |-
                              The requested size of the persistent volume attached to Pod.
                              The format of this field matches that defined by kubernetes/apimachinery.
                              See https://pkg.go.dev/k8s.io/apimachinery/pkg/api/resource#Quantity for more info on the format of this field.
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          storageClass:
                            description: The name of the StorageClass to claim a PersistentVolume
                              from.
                            type: string
                        required:
                        - retain
                        type: object
                      tls:
                        description: Configuration for enabling TLS (Transport Layer
                          Security) encryption for manged database.
                        properties:
                          certificateRef:
                            description: Reference to the certificate secret used
                              for TLS encryption.
                            properties:
                              key:
                                description: The key of the secret to select from.
                                  Must be a valid secret key.
                                pattern: ^[-._a-zA-Z0-9]+$
                                type: string
                              name:
                                description: |-
                                  Name of the referent.
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                type: string
                            required:
                            - key
                            - name
                            type: object
                            x-kubernetes-map-type: atomic
                          privateKeyRef:
                            description: Reference to the private key secret used
                              for TLS encryption.
                            properties:
                              key:
                                description: The key of the secret to select from.
                                  Must be a valid secret key.
                                pattern: ^[-._a-zA-Z0-9]+$
                                type: string
                              name:
                                description: |-
                                  Name of the referent.
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                type: string
                            required:
                            - key
                            - name
                            type: object
                            x-kubernetes-map-type: atomic
                        type: object
                        x-kubernetes-validations:
                        - message: privateKeyRef cannot be empty
                          rule: (!has(self.certificateRef) || has(self.privateKeyRef))
                    required:
                    - create
                    type: object
                    x-kubernetes-validations:
                    - message: databaseSecretRef cannot be empty
                      rule: ((!self.create && self.databaseSecretRef != null) || self.create)
                  monitoring:
                    description: Enable Monitoring for Logsigner and Logserver
                    properties:
                      enabled:
                        default: true
                        description: If true, the Operator will create monitoring
                          resources
                        type: boolean
                        x-kubernetes-validations:
                        - message: Feature cannot be disabled
                          rule: (self || !oldSelf)
                    required:
                    - enabled
                    type: object
                  tls:
                    description: Configuration for enabling TLS (Transport Layer Security)
                      encryption for manged log-server and log-signer services.
                    properties:
                      certificateRef:
                        description: Reference to the certificate secret used for
                          TLS encryption.
                        properties:
                          key:
                            description: The key of the secret to select from. Must
                              be a valid secret key.
                            pattern: ^[-._a-zA-Z0-9]+$
                            type: string
                          name:
                            description: |-
                              Name of the referent.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        required:
                        - key
                        - name
                        type: object
                        x-kubernetes-map-type: atomic
                      privateKeyRef:
                        description: Reference to the private key secret used for
                          TLS encryption.
                        properties:
                          key:
                            description: The key of the secret to select from. Must
                              be a valid secret key.
                            pattern: ^[-._a-zA-Z0-9]+$
                            type: string
                          name:
                            description: |-
                              Name of the referent.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        required:
                        - key
                        - name
                        type: object
                        x-kubernetes-map-type: atomic
                    type: object
                    x-kubernetes-validations:
                    - message: privateKeyRef cannot be empty
                      rule: (!has(self.certificateRef) || has(self.privateKeyRef))
                  trustedCA:
                    description: ConfigMap with additional bundle of trusted CA
                    properties:
                      name:
                        description: |-
                          Name of the referent.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                    required:
                    - name
                    type: object
                    x-kubernetes-map-type: atomic
                type: object
              tsa:
                description: TimestampAuthoritySpec defines the desired state of TimestampAuthority
                properties:
                  externalAccess:
                    description: Define whether you want to export service or not
                    properties:
                      enabled:
                        default: false
                        description: |-
                          If set to true, the Operator will create an Ingress or a Route resource.
                          For the plain Ingress there is no TLS configuration provided Route object uses "edge" termination by default.
                        type: boolean
                        x-kubernetes-validations:
                        - message: Feature cannot be disabled
                          rule: (self || !oldSelf)
                      host:
                        description: Set hostname for your Ingress/Route.
                        type: string
                      routeSelectorLabels:
                        additionalProperties:
                          type: string
                        description: Set Route Selector Labels for ingress sharding.
                        type: object
                        x-kubernetes-validations:
                        - message: RouteSelectorLabels can't be modified
                          rule: (oldSelf.size() == 0 || self == oldSelf)
                    required:
                    - enabled
                    type: object
                  monitoring:
                    description: Enable Service monitors for Timestamp Authority
                    properties:
                      enabled:
                        default: true
                        description: If true, the Operator will create monitoring
                          resources
                        type: boolean
                        x-kubernetes-validations:
                        - message: Feature cannot be disabled
                          rule: (self || !oldSelf)
                    required:
                    - enabled
                    type: object
                  ntpMonitoring:
                    description: Configuration for NTP monitoring
                    properties:
                      config:
                        description: Configuration for Network time protocol monitoring
                        properties:
                          maxTimeDelta:
                            description: |-
                              Maximum number of seconds the local time is allowed to drift from the
                              response of a ntp server
                            type: integer
                          ntpConfigRef:
                            description: |-
                              ConfigMap containing YAML configuration for NTP monitoring
                              Default configuration: https://github.com/securesign/timestamp-authority/blob/main/pkg/ntpmonitor/ntpsync.yaml
                            properties:
                              name:
                                description: |-
                                  Name of the referent.
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                type: string
                            required:
                            - name
                            type: object
                            x-kubernetes-map-type: atomic
                          numServers:
                            description: Number of randomly selected ntp servers to
                              interrogate.
                            type: integer
                          period:
                            description: Period (in seconds) for polling ntp servers
                            type: integer
                          requestAttempts:
                            description: Number of attempts to contact a ntp server
                              before giving up.
                            type: integer
                          requestTimeout:
                            description: |-
                              The timeout in seconds for a request to respond. This value must be
                              smaller than max_time_delta.
                            type: integer
                          serverThreshold:
                            description: Number of servers who must agree with local
                              time.
                            type: integer
                          servers:
                            description: List of servers to contact. Many DNS names
                              resolves to multiple A records.
                            items:
                              type: string
                            type: array
                        type: object
                      enabled:
                        default: true
                        description: Enable or disable NTP(Network Time Protocol)
                          Monitoring, Enabled by default
                        type: boolean
                    required:
                    - enabled
                    type: object
                  signer:
                    description: Signer configuration
                    properties:
                      certificateChain:
                        description: Configuration for the Certificate Chain
                        properties:
                          certificateChainRef:
                            description: Reference to the certificate chain
                            properties:
                              key:
                                description: The key of the secret to select from.
                                  Must be a valid secret key.
                                pattern: ^[-._a-zA-Z0-9]+$
                                type: string
                              name:
                                description: |-
                                  Name of the referent.
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                type: string
                            required:
                            - key
                            - name
                            type: object
                            x-kubernetes-map-type: atomic
                          intermediateCA:
                            description: Intermediate Certificate Authority Config
                            items:
                              description: TSA Certificate Authority configuration
                              properties:
                                commonName:
                                  description: |-
                                    CommonName specifies the common name for the TimeStampAuthorities cert chain.
                                    If not provided, the common name will default to the host name.
                                  type: string
                                organizationEmail:
                                  description: Organization Email specifies the Organization
                                    Email for the TimeStampAuthorities cert chain.
                                  type: string
                                organizationName:
                                  description: OrganizationName specifies the Organization
                                    Name for the TimeStampAuthorities cert chain.
                                  type: string
                                passwordRef:
                                  description: Password to decrypt the signer's root
                                    private key
                                  properties:
                                    key:
                                      description: The key of the secret to select
                                        from. Must be a valid secret key.
                                      pattern: ^[-._a-zA-Z0-9]+$
                                      type: string
                                    name:
                                      description: |-
                                        Name of the referent.
                                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                      type: string
                                  required:
                                  - key
                                  - name
                                  type: object
                                  x-kubernetes-map-type: atomic
                                privateKeyRef:
                                  description: Reference to the signer's root private
                                    key
                                  properties:
                                    key:
                                      description: The key of the secret to select
                                        from. Must be a valid secret key.
                                      pattern: ^[-._a-zA-Z0-9]+$
                                      type: string
                                    name:
                                      description: |-
                                        Name of the referent.
                                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                      type: string
                                  required:
                                  - key
                                  - name
                                  type: object
                                  x-kubernetes-map-type: atomic
                              type: object
                            type: array
                          leafCA:
                            description: Leaf Certificate Authority Config
                            properties:
                              commonName:
                                description: |-
                                  CommonName specifies the common name for the TimeStampAuthorities cert chain.
                                  If not provided, the common name will default to the host name.
                                type: string
                              organizationEmail:
                                description: Organization Email specifies the Organization
                                  Email for the TimeStampAuthorities cert chain.
                                type: string
                              organizationName:
                                description: OrganizationName specifies the Organization
                                  Name for the TimeStampAuthorities cert chain.
                                type: string
                              passwordRef:
                                description: Password to decrypt the signer's root
                                  private key
                                properties:
                                  key:
                                    description: The key of the secret to select from.
                                      Must be a valid secret key.
                                    pattern: ^[-._a-zA-Z0-9]+$
                                    type: string
                                  name:
                                    description: |-
                                      Name of the referent.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                                x-kubernetes-map-type: atomic
                              privateKeyRef:
                                description: Reference to the signer's root private
                                  key
                                properties:
                                  key:
                                    description: The key of the secret to select from.
                                      Must be a valid secret key.
                                    pattern: ^[-._a-zA-Z0-9]+$
                                    type: string
                                  name:
                                    description: |-
                                      Name of the referent.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                          rootCA:
                            description: Root Certificate Authority Config
                            properties:
                              commonName:
                                description: |-
                                  CommonName specifies the common name for the TimeStampAuthorities cert chain.
                                  If not provided, the common name will default to the host name.
                                type: string
                              organizationEmail:
                                description: Organization Email specifies the Organization
                                  Email for the TimeStampAuthorities cert chain.
                                type: string
                              organizationName:
                                description: OrganizationName specifies the Organization
                                  Name for the TimeStampAuthorities cert chain.
                                type: string
                              passwordRef:
                                description: Password to decrypt the signer's root
                                  private key
                                properties:
                                  key:
                                    description: The key of the secret to select from.
                                      Must be a valid secret key.
                                    pattern: ^[-._a-zA-Z0-9]+$
                                    type: string
                                  name:
                                    description: |-
                                      Name of the referent.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                                x-kubernetes-map-type: atomic
                              privateKeyRef:
                                description: Reference to the signer's root private
                                  key
                                properties:
                                  key:
                                    description: The key of the secret to select from.
                                      Must be a valid secret key.
                                    pattern: ^[-._a-zA-Z0-9]+$
                                    type: string
                                  name:
                                    description: |-
                                      Name of the referent.
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                        type: object
                        x-kubernetes-validations:
                        - message: must provide private keys for both root and leaf
                            certificate authorities
                          rule: (!has(self.rootCA) && !has(self.leafCA)) || (has(self.rootCA.privateKeyRef)
                            == has(self.leafCA.privateKeyRef))
                        - message: organizationName cannot be empty for root certificate
                            authority
                          rule: (has(self.certificateChainRef) || self.rootCA.organizationName
                            != "")
                        - message: organizationName cannot be empty for leaf certificate
                            authority
                          rule: (has(self.certificateChainRef) || self.leafCA.organizationName
                            != "")
                        - message: organizationName cannot be empty for intermediate
                            certificate authority, please make sure all are in place
                          rule: (has(self.certificateChainRef) || self.intermediateCA[0].organizationName
                            != "")
                      file:
                        description: Configuration for file-based signer
                        properties:
                          passwordRef:
                            description: Password to decrypt the signer's root private
                              key
                            properties:
                              key:
                                description: The key of the secret to select from.
                                  Must be a valid secret key.
                                pattern: ^[-._a-zA-Z0-9]+$
                                type: string
                              name:
                                description: |-
                                  Name of the referent.
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                type: string
                            required:
                            - key
                            - name
                            type: object
                            x-kubernetes-map-type: atomic
                          privateKeyRef:
                            description: Reference to the signer's root private key
                            properties:
                              key:
                                description: The key of the secret to select from.
                                  Must be a valid secret key.
                                pattern: ^[-._a-zA-Z0-9]+$
                                type: string
                              name:
                                description: |-
                                  Name of the referent.
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                type: string
                            required:
                            - key
                            - name
                            type: object
                            x-kubernetes-map-type: atomic
                        type: object
                      kms:
                        description: Configuration for KMS based signer
                        properties:
                          auth:
                            description: Configuration for authentication for key
                              management services
                            properties:
                              env:
                                description: Environmental variables used to define
                                  authentication parameters
                                items:
                                  description: EnvVar represents an environment variable
                                    present in a Container.
                                  properties:
                                    name:
                                      description: Name of the environment variable.
                                        Must be a C_IDENTIFIER.
                                      type: string
                                    value:
                                      description: |-
                                        Variable references $(VAR_NAME) are expanded
                                        using the previously defined environment variables in the container and
                                        any service environment variables. If a variable cannot be resolved,
                                        the reference in the input string will be unchanged. Double $$ are reduced
                                        to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e.
                                        "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".
                                        Escaped references will never be expanded, regardless of whether the variable
                                        exists or not.
                                        Defaults to "".
                                      type: string
                                    valueFrom:
                                      description: Source for the environment variable's
                                        value. Cannot be used if value is not empty.
                                      properties:
                                        configMapKeyRef:
                                          description: Selects a key of a ConfigMap.
                                          properties:
                                            key:
                                              description: The key to select.
                                              type: string
                                            name:
                                              default: ""
                                              description: |-
                                                Name of the referent.
                                                This field is effectively required, but due to backwards compatibility is
                                                allowed to be empty. Instances of this type with an empty value here are
                                                almost certainly wrong.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                              type: string
                                            optional:
                                              description: Specify whether the ConfigMap
                                                or its key must be defined
                                              type: boolean
                                          required:
                                          - key
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        fieldRef:
                                          description: |-
                                            Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`,
                                            spec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.
                                          properties:
                                            apiVersion:
                                              description: Version of the schema the
                                                FieldPath is written in terms of,
                                                defaults to "v1".
                                              type: string
                                            fieldPath:
                                              description: Path of the field to select
                                                in the specified API version.
                                              type: string
                                          required:
                                          - fieldPath
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        resourceFieldRef:
                                          description: |-
                                            Selects a resource of the container: only resources limits and requests
                                            (limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.
                                          properties:
                                            containerName:
                                              description: 'Container name: required
                                                for volumes, optional for env vars'
                                              type: string
                                            divisor:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Specifies the output format
                                                of the exposed resources, defaults
                                                to "1"
                                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                              x-kubernetes-int-or-string: true
                                            resource:
                                              description: 'Required: resource to
                                                select'
                                              type: string
                                          required:
                                          - resource
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        secretKeyRef:
                                          description: Selects a key of a secret in
                                            the pod's namespace
                                          properties:
                                            key:
                                              description: The key of the secret to
                                                select from.  Must be a valid secret
                                                key.
                                              type: string
                                            name:
                                              default: ""
                                              description: |-
                                                Name of the referent.
                                                This field is effectively required, but due to backwards compatibility is
                                                allowed to be empty. Instances of this type with an empty value here are
                                                almost certainly wrong.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                              type: string
                                            optional:
                                              description: Specify whether the Secret
                                                or its key must be defined
                                              type: boolean
                                          required:
                                          - key
                                          type: object
                                          x-kubernetes-map-type: atomic
                                      type: object
                                  required:
                                  - name
                                  type: object
                                type: array
                              secretMount:
                                description: Secret ref to be mounted inside a pod,
                                  Mount path defaults to /var/run/secrets/tas/auth
                                items:
                                  description: SecretKeySelector selects a key of
                                    a Secret.
                                  properties:
                                    key:
                                      description: The key of the secret to select
                                        from. Must be a valid secret key.
                                      pattern: ^[-._a-zA-Z0-9]+$
                                      type: string
                                    name:
                                      description: |-
                                        Name of the referent.
                                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                      type: string
                                  required:
                                  - key
                                  - name
                                  type: object
                                  x-kubernetes-map-type: atomic
                                type: array
                            type: object
                          keyResource:
                            description: 'KMS key for signing timestamp responses.
                              Valid options include: [gcpkms://resource, azurekms://resource,
                              hashivault://resource, awskms://resource]'
                            type: string
                        required:
                        - keyResource
                        type: object
                      tink:
                        description: Configuration for Tink based signer
                        properties:
                          auth:
                            description: Configuration for authentication for key
                              management services
                            properties:
                              env:
                                description: Environmental variables used to define
                                  authentication parameters
                                items:
                                  description: EnvVar represents an environment variable
                                    present in a Container.
                                  properties:
                                    name:
                                      description: Name of the environment variable.
                                        Must be a C_IDENTIFIER.
                                      type: string
                                    value:
                                      description: |-
                                        Variable references $(VAR_NAME) are expanded
                                        using the previously defined environment variables in the container and
                                        any service environment variables. If a variable cannot be resolved,
                                        the reference in the input string will be unchanged. Double $$ are reduced
                                        to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e.
                                        "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".
                                        Escaped references will never be expanded, regardless of whether the variable
                                        exists or not.
                                        Defaults to "".
                                      type: string
                                    valueFrom:
                                      description: Source for the environment variable's
                                        value. Cannot be used if value is not empty.
                                      properties:
                                        configMapKeyRef:
                                          description: Selects a key of a ConfigMap.
                                          properties:
                                            key:
                                              description: The key to select.
                                              type: string
                                            name:
                                              default: ""
                                              description: |-
                                                Name of the referent.
                                                This field is effectively required, but due to backwards compatibility is
                                                allowed to be empty. Instances of this type with an empty value here are
                                                almost certainly wrong.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                              type: string
                                            optional:
                                              description: Specify whether the ConfigMap
                                                or its key must be defined
                                              type: boolean
                                          required:
                                          - key
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        fieldRef:
                                          description: |-
                                            Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`,
                                            spec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.
                                          properties:
                                            apiVersion:
                                              description: Version of the schema the
                                                FieldPath is written in terms of,
                                                defaults to "v1".
                                              type: string
                                            fieldPath:
                                              description: Path of the field to select
                                                in the specified API version.
                                              type: string
                                          required:
                                          - fieldPath
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        resourceFieldRef:
                                          description: |-
                                            Selects a resource of the container: only resources limits and requests
                                            (limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.
                                          properties:
                                            containerName:
                                              description: 'Container name: required
                                                for volumes, optional for env vars'
                                              type: string
                                            divisor:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: Specifies the output format
                                                of the exposed resources, defaults
                                                to "1"
                                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                              x-kubernetes-int-or-string: true
                                            resource:
                                              description: 'Required: resource to
                                                select'
                                              type: string
                                          required:
                                          - resource
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        secretKeyRef:
                                          description: Selects a key of a secret in
                                            the pod's namespace
                                          properties:
                                            key:
                                              description: The key of the secret to
                                                select from.  Must be a valid secret
                                                key.
                                              type: string
                                            name:
                                              default: ""
                                              description: |-
                                                Name of the referent.
                                                This field is effectively required, but due to backwards compatibility is
                                                allowed to be empty. Instances of this type with an empty value here are
                                                almost certainly wrong.
                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                              type: string
                                            optional:
                                              description: Specify whether the Secret
                                                or its key must be defined
                                              type: boolean
                                          required:
                                          - key
                                          type: object
                                          x-kubernetes-map-type: atomic
                                      type: object
                                  required:
                                  - name
                                  type: object
                                type: array
                              secretMount:
                                description: Secret ref to be mounted inside a pod,
                                  Mount path defaults to /var/run/secrets/tas/auth
                                items:
                                  description: SecretKeySelector selects a key of
                                    a Secret.
                                  properties:
                                    key:
                                      description: The key of the secret to select
                                        from. Must be a valid secret key.
                                      pattern: ^[-._a-zA-Z0-9]+$
                                      type: string
                                    name:
                                      description: |-
                                        Name of the referent.
                                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                      type: string
                                  required:
                                  - key
                                  - name
                                  type: object
                                  x-kubernetes-map-type: atomic
                                type: array
                            type: object
                          keyResource:
                            description: 'KMS key for signing timestamp responses
                              for Tink keysets. Valid options include: [gcp-kms://resource,
                              aws-kms://resource, hcvault://]"'
                            type: string
                          keysetRef:
                            description: Path to KMS-encrypted keyset for Tink, decrypted
                              by TinkKeyResource
                            properties:
                              key:
                                description: The key of the secret to select from.
                                  Must be a valid secret key.
                                pattern: ^[-._a-zA-Z0-9]+$
                                type: string
                              name:
                                description: |-
                                  Name of the referent.
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                type: string
                            required:
                            - key
                            - name
                            type: object
                            x-kubernetes-map-type: atomic
                        required:
                        - keyResource
                        - keysetRef
                        type: object
                    required:
                    - certificateChain
                    type: object
                    x-kubernetes-validations:
                    - message: signer config needs a matching cert chain in certificateChain.certificateChainRef
                      rule: (!(has(self.file) || has(self.kms) || has(self.tink))
                        || has(self.certificateChain.certificateChainRef))
                    - message: certificateChainRef should not be present if no signers
                        are configured
                      rule: (has(self.file) || has(self.kms) || has(self.tink) ||
                        !has(self.certificateChain.certificateChainRef))
                    - message: only one signer should be configured at any time
                      rule: (!(has(self.file) && has(self.kms)) && !(has(self.file)
                        && has(self.tink)) && !(has(self.kms) && has(self.tink)))
                  trustedCA:
                    description: ConfigMap with additional bundle of trusted CA
                    properties:
                      name:
                        description: |-
                          Name of the referent.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                    required:
                    - name
                    type: object
                    x-kubernetes-map-type: atomic
                required:
                - signer
                type: object
                x-kubernetes-validations:
                - message: when certificateChainRef is set, intermediateCA, leafCA,
                    and rootCA must not be set
                  rule: '!(has(self.signer.certificateChain.certificateChainRef) &&
                    (has(self.signer.certificateChain.intermediateCA) || has(self.signer.certificateChain.leafCA)
                    || has(self.signer.certificateChain.rootCA)))'
              tuf:
                default:
                  keys:
                  - name: rekor.pub
                  - name: ctfe.pub
                  - name: fulcio_v1.crt.pem
                  - name: tsa.certchain.pem
                description: TufSpec defines the desired state of Tuf
                properties:
                  externalAccess:
                    description: Define whether you want to export service or not
                    properties:
                      enabled:
                        default: false
                        description: |-
                          If set to true, the Operator will create an Ingress or a Route resource.
                          For the plain Ingress there is no TLS configuration provided Route object uses "edge" termination by default.
                        type: boolean
                        x-kubernetes-validations:
                        - message: Feature cannot be disabled
                          rule: (self || !oldSelf)
                      host:
                        description: Set hostname for your Ingress/Route.
                        type: string
                      routeSelectorLabels:
                        additionalProperties:
                          type: string
                        description: Set Route Selector Labels for ingress sharding.
                        type: object
                        x-kubernetes-validations:
                        - message: RouteSelectorLabels can't be modified
                          rule: (oldSelf.size() == 0 || self == oldSelf)
                    required:
                    - enabled
                    type: object
                  keys:
                    default:
                    - name: rekor.pub
                    - name: ctfe.pub
                    - name: fulcio_v1.crt.pem
                    - name: tsa.certchain.pem
                    description: List of TUF targets which will be added to TUF root
                    items:
                      properties:
                        name:
                          description: File name which will be used as TUF target.
                          enum:
                          - rekor.pub
                          - ctfe.pub
                          - fulcio_v1.crt.pem
                          - tsa.certchain.pem
                          type: string
                        secretRef:
                          description: |-
                            Reference to secret object
                            If it is unset, the operator will try to autoconfigure secret reference, by searching secrets in namespace which
                            contain `rhtas.redhat.com/$name` label.
                          properties:
                            key:
                              description: The key of the secret to select from. Must
                                be a valid secret key.
                              pattern: ^[-._a-zA-Z0-9]+$
                              type: string
                            name:
                              description: |-
                                Name of the referent.
                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                              type: string
                          required:
                          - key
                          - name
                          type: object
                          x-kubernetes-map-type: atomic
                      required:
                      - name
                      type: object
                    minItems: 1
                    type: array
                  port:
                    default: 80
                    format: int32
                    maximum: 65535
                    minimum: 1
                    type: integer
                  pvc:
                    default:
                      accessModes:
                      - ReadWriteOnce
                      retain: true
                      size: 100Mi
                    description: |-
                      Pvc configuration of the persistent storage claim for deployment in the cluster.
                      You can use ReadWriteOnce accessMode if you don't have suitable storage provider but your deployment will not support HA mode
                    properties:
                      accessModes:
                        default:
                        - ReadWriteOnce
                        description: PersistentVolume AccessModes. Configure ReadWriteMany
                          for HA deployment.
                        items:
                          enum:
                          - ReadWriteOnce
                          - ReadOnlyMany
                          - ReadWriteMany
                          - ReadWriteOncePod
                          type: string
                        minItems: 1
                        type: array
                      name:
                        description: Name of the PVC
                        maxLength: 253
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                      retain:
                        default: true
                        description: Retain policy for the PVC
                        type: boolean
                        x-kubernetes-validations:
                        - message: Field is immutable
                          rule: (self == oldSelf)
                      size:
                        anyOf:
                        - type: integer
                        - type: string
                        default: 100Mi
                        description: |-
                          The requested size of the persistent volume attached to Pod.
                          The format of this field matches that defined by kubernetes/apimachinery.
                          See https://pkg.go.dev/k8s.io/apimachinery/pkg/api/resource#Quantity for more info on the format of this field.
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      storageClass:
                        description: The name of the StorageClass to claim a PersistentVolume
                          from.
                        type: string
                    required:
                    - retain
                    type: object
                  rootKeySecretRef:
                    default:
                      name: tuf-root-keys
                    description: Secret object reference that will hold you repository
                      root keys. This parameter will be used only with operator-managed
                      repository.
                    properties:
                      name:
                        description: |-
                          Name of the referent.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                    required:
                    - name
                    type: object
                    x-kubernetes-map-type: atomic
                type: object
            type: object
          status:
            description: SecuresignStatus defines the observed state of Securesign
            properties:
              conditions:
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              fulcio:
                properties:
                  url:
                    type: string
                type: object
              rekor:
                properties:
                  url:
                    type: string
                type: object
              tsa:
                properties:
                  url:
                    type: string
                type: object
              tuf:
                properties:
                  url:
                    type: string
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: null
  storedVersions: null
